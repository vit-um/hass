telegram:

   automation:   
        - id: start_message
          alias: –û—Ç—á–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã
          initial_state: true
          trigger:   
             - platform: homeassistant
               event: start
          action:          
             - delay: 00:01:10
             - service: script.turn_on
               entity_id: script.system_report
             - service: light.turn_off
               entity_id: light.wled
      
        - id: send_report
          alias: –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç—á–µ—Ç
          initial_state: true
          trigger:
          - platform: event
            event_type: telegram_callback
            event_data:
              data: '/report_S'
          action:
           - service: script.turn_on
             entity_id: 
                - script.system_report

        - id: send_report_balkon
          alias: –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç—á–µ—Ç –ø–æ –±–∞–ª–∫–æ–Ω—É
          initial_state: true
          trigger:
          - platform: event
            event_type: telegram_callback
            event_data:
              data: '/report_B'
          action:
           - service: script.turn_on
             entity_id: 
                - script.send_message_1
                
        - id: send_shop_list
          alias: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
          initial_state: true
          trigger:
          - platform: event
            event_type: telegram_callback
            event_data:
              data: '/list'
          action:
            - service: notify.telegram_gr
              data:
                title: "*–í–æ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫:*"
                message: |
                  ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ  
                  {{ states('sensor.shopping_list') }}

        - id: send_light_red
          alias: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫—Ä–∞—Å–Ω—ã–π —Å–≤–µ—Ç
          initial_state: true
          trigger:
          - platform: event
            event_type: telegram_callback
            event_data:
              data: '/light_R'
          action:
           - service: switch.toggle
             entity_id: 
                - switch.sonoff_100086c57d_2
           - delay: 00:00:02
           - service: notify.telegram_gr
             data:
               message: "–ö—Ä–∞—Å–Ω—ã–π —Å–≤–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ {{ states ('switch.sonoff_100086c57d_2') }}"

        - id: send_photo
          alias: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
          initial_state: true
          trigger:
          - platform: event
            event_type: telegram_callback
            event_data:
              data: '/photo'
          action:
           - service: script.photo_sonoff
             entity_id: 
                - script.photo_sonoff
           
        - id: send_video
          alias: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ
          initial_state: true
          trigger:
          - platform: event
            event_type: telegram_callback
            event_data:
              data: '/video'
          action:
           - service: script.video_sonoff
             entity_id: 
                - script.video_sonoff
                
        - id: GEO_Alex
          alias: –°–æ–æ–±—â–∏—Ç—å –≥–¥–µ –ê–ª–µ–∫—Å–µ–π
          initial_state: true
          trigger:
            platform: event
            event_type: telegram_callback
            event_data:
               data: '/geo_A'
          action:
          - service: notify.telegram_gr
            data:
              message: |
                –ê–ª–µ–∫—Å–µ–π —Å–µ–π—á–∞—Å –∑–¥–µ—Å—å
                ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ
                –ê–¥—Ä–µ—Å: {{ states ('sensor.alex_track_adr') }}
                –ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏: {{ states ('sensor.alex_track_bl') }}
                –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç—É: https://www.google.ru/maps/place/{{ states.person.oleksii.attributes.latitude }}+{{ states.person.oleksii.attributes.longitude }}
                {{"\U000023F0"}}  {{ states.sensor.time.state }}     {{"\U0001F4C6"}}  {{ now().strftime("%d.%m.%Y") }}

                
        - id: counters
          alias: –°–æ–æ–±—â–∏—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤
          initial_state: true
          trigger:
            platform: event
            event_type: telegram_callback
            event_data:
               data: '/counters'
          action:
          - service: notify.telegram_gr
            data:
              title: '*–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—á–µ—Ç—á–∏–∫–æ–≤:*'
              message: |
                ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ
                ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –¥–µ–Ω—å: {{ states ('sensor.electric_day') }} –∫–í—Ç—á
                ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –Ω–æ—á—å: {{ states ('sensor.electric_night') }} –∫–í—Ç—á
                üî• –°—á–µ—Ç—á–∏–∫ –≥–∞–∑–∞:  {{ states ('sensor.gas_counter') }} –º3
                üö∞ –°—á–µ—Ç—á–∏–∫ –≤–æ–¥—ã:  {{ states ('sensor.water_counter') }} –º3
                ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ


        - id: telegram_keyboard
          alias: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Ç–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç–∞
          initial_state: true
          trigger:
          - platform: event
            event_type: telegram_command
            event_data:
              command: '/go'
          action:
          - service: notify.telegram_gr
            data:
              message: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–º–Ω—ã–º –¥–æ–º–æ–º!'
              data:
                inline_keyboard:
                  - "–§–æ—Ç–æ:/photo, –í–∏–¥–µ–æ:/video"
                  - "–°–∏—Å—Ç–µ–º–∞:/report_S, –ë–∞–ª–∫–æ–Ω:/report_B, –°—á–µ—Ç—á–∏–∫–∏:/counters"
                  - "–§–∏—Ç–æ:/light_R, –ü–æ–∫—É–ø–∫–∏:/list, –ì–¥–µ –õ–µ—à–∞?:/geo_A"

 
        - id: control_water_heat_end_on
          alias: –í–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞ –Ω–∞–≥—Ä–µ–≤–æ–º –≤–æ–¥—ã
          description: –í–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞ –Ω–∞–≥—Ä–µ–≤–æ–º –≤–æ–¥—ã
          initial_state: true
          trigger:
            - entity_id: input_boolean.water_auto_heat
              platform: state
              to: 'on'
          condition:
            condition: and
            conditions:
                - condition: numeric_state
                  entity_id: sensor.sonoff_1000bd8c01_power
                  below: 10
                - condition: state
                  entity_id: switch.sonoff_1000bd8c01
                  state: 'on'
                - condition: numeric_state
                  entity_id: sensor.sonoff_1000bd8c01_current
                  below: 1
          action:
            - service: notify.telegram_gr
              data:
                title: '*–í–æ–¥–∞ –≤ –ë–æ–π–ª–µ—Ä–µ —É–∂–µ –≥–æ—Ä—è—á–∞—è!*'
                message: "–¢–æ–ø–∞–π –º—ã—Ç—å—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, —á—Ç–æ–±—ã —è –µ–µ –Ω–µ –≥—Ä–µ–ª –∑–∞–Ω–æ–≤–æ"
            - service: input_boolean.turn_off
              entity_id: input_boolean.water_auto_heat
          mode: single



        - id: control_water_heat_end
          alias: –ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞ –Ω–∞–≥—Ä–µ–≤–æ–º –≤–æ–¥—ã
          description: –ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞ –Ω–∞–≥—Ä–µ–≤–æ–º –≤–æ–¥—ã
          trigger:
          - platform: template
            value_template: '{{ (states(''sensor.sonoff_1000bd8c01_current'')|float) < 1 }}'
          - platform: template
            value_template: '{{ (states(''sensor.sonoff_1000bd8c01_power'')|float) < 10 }}'
          condition:
            condition: and
            conditions:
            - condition: state
              entity_id: input_boolean.water_auto_heat
              state: 'on'
            - condition: numeric_state
              entity_id: sensor.sonoff_1000bd8c01_power
              below: 10
            - condition: state
              entity_id: switch.sonoff_1000bd8c01
              state: 'on'
            - condition: numeric_state
              entity_id: sensor.sonoff_1000bd8c01_current
              below: 1
          action:
          - service: notify.telegram_gr
            data:
              title: '*–ë–æ–π–ª–µ—Ä –Ω–∞–≥—Ä–µ–ª –≤–æ–¥—É –¥–æ –∑–∞–¥–∞–Ω–Ω—ãx –ø—Ä–µ–¥–µ–ª–æ–≤*'
              message: "–¢–æ–ø–∞–π –º—ã—Ç—å—Å—è"
          - service: input_boolean.turn_off
            entity_id: input_boolean.water_auto_heat
          mode: single


        - id: take_foto_door_open
          alias: –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–≤–µ—Ä–∏
          description: –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ –ø—Ä–∏ –≤—Ö–æ–¥–µ –¥–æ–º–æ–π
          initial_state: true
          trigger:
            - entity_id: binary_sensor.door_contact 
              platform: state
              to: 'on'
          condition:
            - condition: state
              entity_id: binary_sensor.motion_occupancy
              state: 'off'
              for:
                minutes: 5
          action:
            - service: switch.turn_on
              entity_id: 
                - switch.sonoff_1000e7ffae_1
            - service: switch.turn_on
              entity_id: 
                - switch.sonoff_1000e7ffae_2
            - delay: 0:0:03
            - service: script.video_sonoff
              entity_id: 
                - script.video_sonoff
            - delay: 0:03:00
            - service: switch.turn_off
              entity_id:
                - switch.sonoff_1000e7ffae_2
          mode: single
